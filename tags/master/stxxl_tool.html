<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>STXXL: stxxl_tool Collection</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">STXXL
   &#160;<span id="projectnumber">1.4-dev</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('stxxl_tool.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">stxxl_tool Collection </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><dl class="section author"><dt>Authors</dt><dd>Timo Bingmann (2013)</dd></dl>
<p>The <code>stxxl_tool</code> accompanies the source code and also binary distributions of STXXL. It contains multiple subprograms that can be used for benchmarking basic functionality of the library. We describe only some of the benchmarks and functions in this document.</p>
<p><code>stxxl_tool</code> has a verbose command line help and descriptions of all subtools are available there. Try </p>
<pre class="fragment">$ stxxl_tool
(prints all available subtools)
$ stxxl_tool &lt;subtool&gt; --help
</pre><h1><a class="anchor" id="create_files"></a>
create_files</h1>
<p>To pre-create files one can issue a command similar to: </p>
<pre class="fragment">$ stxxl_tool create_files 10gib /data01/stxxl.tmp
</pre><h1><a class="anchor" id="benchmark_disks"></a>
Benchmark Disk Bandwidth</h1>
<p>Maybe the most important tool for testing the I/O performance of an experimental platform is <b><code>stxxl_tool benchmark_disks</code></b>.</p>
<p>This subtool will read the disk configuration file (.stxxl) and open all parallel disk files. Then the specified amount of data is written and read on the configured disks using the block manager and file I/O layers. The transfer speed is outputted for every batch for processed blocks.</p>
<p>An example run looks as follows: </p>
<pre class="fragment">$ stxxl_tool benchmark_disks 10gib -b 4
Parameter size set to 10737418240.
Option -b, --batch set to 4.
[STXXL-MSG] STXXL v1.4.0 (prerelease)
[STXXL-MSG] Disk '/data01/stxxl' is allocated, space: 228881 MiB, I/O implementation: syscall
[STXXL-MSG] Disk '/data02/stxxl' is allocated, space: 228881 MiB, I/O implementation: syscall
[STXXL-MSG] In total 2 disks are allocated, space: 457763 MiB
# Batch size: 33554432 (32.000 MiB)  (4 blocks of 8388608 (8.000 MiB) ) using randomized cycling striping
Offset          0 MiB: 170.6 MiB/s write, 108.9 MiB/s read
Offset         32 MiB: 164.6 MiB/s write, 108.4 MiB/s read
Offset         64 MiB: 158.6 MiB/s write, 102.0 MiB/s read
Offset         96 MiB: 143.8 MiB/s write, 116.3 MiB/s read
Offset        128 MiB: 156.3 MiB/s write, 130.7 MiB/s read
Offset        160 MiB: 168.3 MiB/s write,  99.3 MiB/s read
Offset        192 MiB: 156.6 MiB/s write, 109.2 MiB/s read
Offset        224 MiB: 159.9 MiB/s write, 107.7 MiB/s read
Offset        256 MiB: 156.0 MiB/s write,  88.7 MiB/s read
Offset        288 MiB: 149.6 MiB/s write, 109.7 MiB/s read
Offset        320 MiB: 138.3 MiB/s write, 113.2 MiB/s read
[...]
</pre><h1><a class="anchor" id="benchmark_sort"></a>
Benchmark Sorting Methods</h1>
<p>The second performance metric of an experimental platform is how fast STXXL can sort on it. This is measured by the <code>stxxl_tool benchmark_sort</code> subtool.</p>
<p>This subtool performs <a class="el" href="group__stlalgo.html#ga5fcb89548cf48f273e140e973af6df33" title="Sort records comparison-based, see stxxl::sort -- Sorting Comparison-Based. ">stxxl::sort</a>, <a class="el" href="group__stlalgo.html#gaf9b40c5c99c17e08bd8fd59b979b84b5" title="Sort records with integer keys, see stxxl::ksort -- Sorting Integer Keys. ">stxxl::ksort</a> and <a class="el" href="classstxxl_1_1stream_1_1sort.html" title="Produces sorted stream from input stream. ">stream::sort</a> on uint32 pairs, uint64 pairs and a larger struct of 64 bytes.</p>
<p>An example run looks as follows: </p>
<pre class="fragment">$ stxxl_tool benchmark_sort 20gib -M 1gib
Parameter size set to 21474836480.
Option -M, --ram set to 1073741824.
[STXXL-MSG] STXXL v1.4.0 (prerelease) + gnu parallel(20120301)
[STXXL-MSG] Disk '/dev/sdb1' is allocated, space: 915527 MiB, I/O implementation: syscall
[STXXL-MSG] Disk '/dev/sdc1' is allocated, space: 915527 MiB, I/O implementation: syscall
[STXXL-MSG] Disk '/dev/sdd1' is allocated, space: 915527 MiB, I/O implementation: syscall
[STXXL-MSG] Disk '/dev/sde1' is allocated, space: 915527 MiB, I/O implementation: syscall
[STXXL-MSG] In total 4 disks are allocated, space: 3662109 MiB
#!!! running sorting test with pair of uint32 = 8 bytes.
# materialize random_stream into vector of size 2684354560
finished in 46.9271 seconds @ 436.421 MiB/s
# stxxl::sort vector of size 2684354560
finished in 256.048 seconds @ 79.9849 MiB/s
# stxxl::ksort vector of size 2684354560
finished in 356.964 seconds @ 57.3727 MiB/s
# stxxl::stream::sort of size 2684354560
finished in 213.102 seconds @ 96.1041 MiB/s

#!!! running sorting test with pair of uint64 = 16 bytes.
# materialize random_stream into vector of size 1342177280
finished in 95.5571 seconds @ 214.322 MiB/s
# stxxl::sort vector of size 1342177280
finished in 222.727 seconds @ 91.9513 MiB/s
# stxxl::ksort vector of size 1342177280
finished in 265.456 seconds @ 77.1502 MiB/s
# stxxl::stream::sort of size 1342177280
finished in 200.357 seconds @ 102.218 MiB/s

#!!! running sorting test with struct of 64 bytes = 64 bytes.
# materialize random_stream into vector of size 335544320
finished in 46.9293 seconds @ 436.401 MiB/s
# stxxl::sort vector of size 335544320
finished in 215.798 seconds @ 94.9035 MiB/s
# stxxl::ksort vector of size 335544320
finished in 222.5 seconds @ 92.0451 MiB/s
# stxxl::stream::sort of size 335544320
finished in 112.607 seconds @ 181.871 MiB/s
</pre><p>As <a class="el" href="group__stlalgo.html#ga5fcb89548cf48f273e140e973af6df33" title="Sort records comparison-based, see stxxl::sort -- Sorting Comparison-Based. ">stxxl::sort</a> and <a class="el" href="group__stlalgo.html#gaf9b40c5c99c17e08bd8fd59b979b84b5" title="Sort records with integer keys, see stxxl::ksort -- Sorting Integer Keys. ">stxxl::ksort</a> perform about 4 read/write steps on the data, the sorting speed is about 1/4 of the scanning speed. On the other hand, <a class="el" href="classstxxl_1_1stream_1_1sort.html" title="Produces sorted stream from input stream. ">stream::sort</a> performs only 2 read/write steps to create a sorted stream from an unsorted one. Thus the stream sorting speed is about 1/2 of scanning speed. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">Welcome to STXXL</a></li>
    <li class="footer"><a href="http://github.com/stxxl/stxxl/commit/0a80a8c55993948f7f2f6c2c5a51ff45b403045b">STXXL 1.4.1-380-g0a80a8c</a><script type="text/javascript">
var _paq = _paq || [];  _paq.push(['trackPageView']);  _paq.push(['enableLinkTracking']);  (function() {    var u='http://panthema.net/wik-331/';    _paq.push(['setTrackerUrl', u+'js/']);    _paq.push(['setSiteId', '1']);    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0]; g.type='text/javascript';    g.defer=true; g.async=true; g.src=u+'js/'; s.parentNode.insertBefore(g,s);  })();
</script>
<noscript><img src="http://panthema.net/wik-331/js/?idsite=1&amp;rec=1" style="border:0" alt="" /></noscript> - Generated on Sat Feb 11 2017 06:26:31 for STXXL by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
